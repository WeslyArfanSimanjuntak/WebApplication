

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Tritsur</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

    <!-- Bootstrap 3.3.7 -->
    <link href="/Content/adminlte/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />


    <!-- Font Awesome -->
    <link href="/Content/adminlte/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" />


    <!-- Ionicons -->
    <link href="/Content/adminlte/bower_components/Ionicons/css/ionicons.min.css" rel="stylesheet" />


    <!-- Theme style -->
    <link href="/Content/adminlte/dist/css/AdminLTE.min.css" rel="stylesheet" />


    <!-- AdminLTE Skins. Choose a skin from the css/skins
             folder instead of downloading all of them to reduce the load. -->


    <link href="/Content/adminlte/dist/css/skins/_all-skins.min.css" rel="stylesheet" />

    <!-- Data table -->
    <link rel="stylesheet" href="/Content/css/dataTables.bootstrap.min.css" />


    <link rel="stylesheet" href="/Content/adminlte/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" />



    <link rel="stylesheet" href="/Content/adminlte/bower_components/select2/dist/css/select2.min.css" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Google Font -->
    <link rel="stylesheet" href="/Content/css/googlefont/fontgoogle.css">
    <link rel="stylesheet" href="/Content/css/bootstrap-datetimepicker.min.css">

    <style>
        .modal {
            text-align: center;
            padding: 0 !important;
        }

            .modal:before {
                content: '';
                display: inline-block;
                height: 100%;
                vertical-align: middle;
                margin-right: -4px;
            }

        .modal-dialog {
            display: inline-block;
            text-align: left;
            vertical-align: middle;
        }
    </style>
    <script src="/Content/adminlte/bower_components/jquery/dist/jquery.min.js"></script>

    <!-- Bootstrap 3.3.7 -->
    <script src="/Content/adminlte/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>


    <!-- SlimScroll -->
    <script src="/Content/adminlte/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>


    <!-- FastClick -->
    <script src="/Content/adminlte/bower_components/fastclick/lib/fastclick.js"></script>


    <!-- AdminLTE App -->
    <script src="/Content/adminlte/dist/js/adminlte.min.js"></script>


    <!-- AdminLTE for demo purposes -->
    <script src="/Content/adminlte/dist/js/demo.js"></script>


    <!-- Data Table -->
    <script src="/Content/adminlte/plugins/datatables/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="/Content/adminlte/plugins/datatables/dataTables.bootstrap.min.js" type="text/javascript"></script>

    <script src="/Content/adminlte/plugins/datatables/jquery.dataTables.odata.js" type="text/javascript"></script>

    <script src="/Content/adminlte/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="/Content/adminlte/bower_components/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
    <script src="/Content/adminlte/bower_components/select2/dist/js/select2.full.min.js"></script>
    <script src="/Content/adminlte/bower_components/moment/moment.js"></script>
    <script src="/Scripts/bootstrap-datetimepicker.min.js"></script>
    <script src="/Scripts/jQuery.numberOnly.min.js"></script>
    <script src="/Scripts/jquery.number.min.js" type="text/javascript"></script>

    <script src="/Content/adminlte/plugins/jQueryUI/jquery-ui.min.js"></script>

    <script src="/Content/adminlte/plugins/datatables/extensions/DataGenerator/dataTables.buttons.min.js"></script>
    <script src="/Content/adminlte/plugins/datatables/extensions/DataGenerator/jszip.min.js"></script>
    <script src="/Content/adminlte/plugins/datatables/extensions/DataGenerator/pdfmake.min.js" type="text/javascript"></script>
    <script src="/Content/adminlte/plugins/datatables/extensions/DataGenerator/vfs_fonts.js"></script>
    <script src="/Content/adminlte/plugins/datatables/extensions/DataGenerator/buttons.html5.min.js"></script>
    <script src="/Content/adminlte/plugins/datatables/extensions/DataGenerator/buttons.flash.min.js"></script>

    <script type="text/javascript">
        var baseUrl = 'http://localhost:56002';
        var entityApiUrl = 'http://localhost:56002/EntityApi/GetData';
        function AjaxCall(HandleResult, url, type) {
            type = (typeof b !== 'undefined') ? type : "GET";
            $.ajax({
                type: type,
                url: url,
                beforeSend: function () {
                    $('#myModal').modal("show");
                },
                complete: function () {
                    setTimeout(function () {
                        $('#myModal').modal("hide");
                    }, 750);
                },
                success: function (data) {
                    HandleResult(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        }

        function PopItUp(url) {
            newwindow = window.open(url, 'name', 'height=700,width=900');
            if (window.focus) { newwindow.focus() }
            return false;
        }
        $(document).ready(function () {
            $(".money-format").each(function (index) {
                $(this).number(true, 2);
            });
            $(".money-format0").each(function (index) {
                $(this).number(true, 0);
            });
            $(".money-format1").each(function (index) {
                $(this).number(true, 1);
            });
            $(".money-format2").each(function (index) {
                $(this).number(true, 2);
            });
        });

        function AmountTonM3Converter(node, from, toId) {

            var tonUnitToM3Unit = 0.66;

            if (from === "ton") {
                $('#' + toId).val((parseFloat(node.value) * parseFloat(tonUnitToM3Unit)));
            } else if (from == "m3") {
                $('#' + toId).val((parseFloat(node.value) / parseFloat(tonUnitToM3Unit)));
            }
        }
    </script>

</head>
<!-- ADD THE CLASS sidebar-collapse TO HIDE THE SIDEBAR PRIOR TO LOADING THE SITE -->
<body class="skin-purple-light sidebar-mini wysihtml5-supported">
    <div class="wrapper">
        <header class="main-header">
            <!-- Logo -->
            <a href="/" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini">Tritsur Portal</span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg">Tritsur Portal</span>
            </a>
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <div class="navbar-custom-menu">
                    <form action="/Account/LogOff" class="navbar-right" id="logoutForm" method="post">
                        <input name="__RequestVerificationToken" type="hidden" value="XHww75YmQJQm_sWjQ8p3adotyQxBRYHBv8wY_Fy5wvfKYBJb0cS_GE31q_LjV1Nv5tCfVN0ymKZTsofeX-Yc3MvwuAbmRj3G4JHAvlRgmdHmq59QukA9l7_StvEAFyolQLvMTamh-5SYq3ugC15fLA2" />        <ul class="nav navbar-nav">

                            <!-- User Account: style can be found in dropdown.less -->
                            <li class="dropdown user user-menu">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <span class="hidden-xs pad">Hello Admin !</span>
                                </a>
                                <ul class="dropdown-menu pad">
                                    <!-- User image -->
                                    <li class="user-header">
                                        <p>

                                        </p>
                                    </li>
                                    <!-- Menu Body -->
                                    <li class="user-body">
                                        <div class="row">

                                        </div>
                                        <!-- /.row -->
                                    </li>
                                    <!-- Menu Footer-->
                                    <li class="user-footer">
                                        <div class="pull-left">
                                            <a href="/UserManagement/ASPNETUSERSChangePassword" class="btn btn-default btn-flat">Change Password</a>
                                        </div>
                                        <div class="pull-right">
                                            <a href="javascript:document.getElementById('logoutForm').submit()" class="btn btn-default btn-flat">Log Off</a>
                                        </div>
                                    </li>
                                </ul>
                            </li>

                            <li><a href=""></a></li>
                        </ul>
                    </form>
                </div>
            </nav>
        </header>
        <!-- =============================================== -->
        <!-- Left side column. contains the sidebar -->
        <aside class="main-sidebar">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <ul class="sidebar-menu" data-widget="tree">

                    <li id="financetransaction_index"><a href="http://localhost:56002/financetransaction"><i class=""></i><span>Finance Transaction</span></a></li>
                    <li id="contract_index"><a href="http://localhost:56002/contract"><i class=""></i><span>Contract</span></a></li>
                    <li class="treeview" id="li_Product Transaction">
                        <a href="#">
                            <i class=""></i>
                            <span>Product Transaction</span>
                            <span class="pull-right-container"></span>
                            <i class="fa fa-angle-left pull-right"></i>
                            </span>
                        </a>
                        <ul class="treeview-menu" id="ul_Product Transaction">

                            <li id="transactionproduct_convertproduct"><a href="http://localhost:56002/transactionproduct/convertproduct"><i class=""></i><span>Convertion</span></a></li>
                            <li id="transactionproduct_mixproduct"><a href="http://localhost:56002/transactionproduct/mixproduct"><i class=""></i><span>Mixing</span></a></li>
                            <li id="transactionproduct_adjustproduct"><a href="http://localhost:56002/transactionproduct/adjustproduct"><i class=""></i><span>Adjusment</span></a></li>
                            <li id="ritase_index"><a href="http://localhost:56002/ritase"><i class=""></i><span>Ritase</span></a></li>

                            <li id="transactionproduct_stockdetails"><a href="http://localhost:56002/transactionproduct/stockdetails"><i class=""></i><span>Stock Details</span></a></li>
                        </ul>
                    </li>

                    <li class="treeview" id="li_Parameter Setup">
                        <a href="#">
                            <i class=""></i>
                            <span>Parameter Setup</span>
                            <span class="pull-right-container"></span>
                            <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu" id="ul_Parameter Setup">

                            <li id="product_index"><a href="http://localhost:56002/product"><i class=""></i><span>Product</span></a></li>
                            <li id="batch_index"><a href="http://localhost:56002/batch"><i class=""></i><span>Batch</span></a></li>
                            <li id="batchmixes_index"><a href="http://localhost:56002/batchmixes"><i class=""></i><span>BatchMixes</span></a></li>
                            <li id="client_index"><a href="http://localhost:56002/client"><i class=""></i><span>Client</span></a></li>
                            <li id="employee_index"><a href="http://localhost:56002/employee"><i class=""></i><span>Employee</span></a></li>
                            <li id="source_index"><a href="http://localhost:56002/source"><i class=""></i><span>Source</span></a></li>
                            <li id="site_index"><a href="http://localhost:56002/site"><i class=""></i><span>Site</span></a></li>
                            <li id="armada_index"><a href="http://localhost:56002/armada"><i class=""></i><span>Armada</span></a></li>
                            <li id="nostrobank_index"><a href="http://localhost:56002/nostrobank"><i class=""></i><span>Nostro Bank</span></a></li>
                        </ul>
                    </li>

                    <li class="treeview" id="li_User Management">
                        <a href="#">
                            <i class=""></i>
                            <span>User Management</span>
                            <span class="pull-right-container"></span>
                            <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu" id="ul_User Management">

                            <li id="aspnetusers_index"><a href="http://localhost:56002/aspnetusers"><i class=""></i><span>User</span></a></li>
                            <li id="aspnetroles_index"><a href="http://localhost:56002/aspnetroles"><i class=""></i><span>Roles</span></a></li>
                            <li id="aspnetgroups_index"><a href="http://localhost:56002/aspnetgroups"><i class=""></i><span>Group</span></a></li>
                            <li id="aspnetrolegroups_index"><a href="http://localhost:56002/aspnetrolegroups"><i class=""></i><span>GroupRoles</span></a></li>
                            <li id="menu_index"><a href="http://localhost:56002/menu"><i class=""></i><span>Menu</span></a></li>
                        </ul>
                    </li>


                </ul>

            </section>
            <!-- /.sidebar -->
        </aside>
        <!-- =============================================== -->
        <!-- Content Wrapper. Contains page content -->

        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header"></section>


            <!-- Main content -->
            <section class="content">


                <div id="myModal" class="modal fade bd-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="vertical-align: middle;">
                    <div class="modal-dialog modal-sm">
                        <div id="loadingSpinner">
                            <div class="text-center">
                                <img src='http://localhost:56002/content/icon/index.ripple-radio-preloader.svg'>
                            </div>
                        </div>
                    </div>
                </div>



                <div class="box box-solid">
                    <div class="box-header with-border">
                        <h3 class="box-title">
                            Create
                        </h3>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <form action="/contract/Create" method="post">
                            <input name="__RequestVerificationToken" type="hidden" value="GbvIsOec3pQbtmGIoID7NyBkR56iRoGwwpffoS3WUjWh0JvBnNZbPALltQK0Fa9dN7OIvjAAs8rLlHyxjGMwIUq6nf51wP9mVq8G5gU3cncmZ5P65yHp2p-8Ek5XqIpFhyUM3VF2WdgdD6B8kbaz1Q2" />        <div class="form-horizontal">

                                <div class="form-group">
                                    <label class="control-label col-md-2" for="Contract_Number">Contract Number</label>
                                    <div class="col-md-10">
                                        <input class="form-control" id="ContractNumber" name="ContractNumber" readonly="true" type="text" value="CTR-7/2/2019-0000002" />
                                        <span class="field-validation-valid text-danger" data-valmsg-for="ContractNumber" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2" for="Client_Id">Client Id</label>
                                    <div class="col-md-10">
                                        <select class="form-control" id="ClientIdPK" name="ClientIdPK" required="required">
                                            <option value="">---</option>
                                            <option value="1">PT Totalindo - PT Totalindo Eka Persada</option>
                                        </select>
                                        <span class="field-validation-valid text-danger" data-valmsg-for="ClientIdPK" data-valmsg-replace="true"></span>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label col-md-4" for="">Client Email</label>
                                            <div class="col-md-8">
                                                <input class="form-control" id="ClientEmail" name="ClientEmail" readonly="true" type="text" value="" />
                                                <span class="field-validation-valid text-danger" data-valmsg-for="ClientEmail" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4" for="">Client Phone Number</label>
                                            <div class="col-md-8">
                                                <input class="form-control" id="ClientPhoneNumber" name="ClientPhoneNumber" readonly="true" type="text" value="" />
                                                <span class="field-validation-valid text-danger" data-valmsg-for="Line" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4" for="" readonly="true">Client Client Address</label>
                                            <div class="col-md-8">
                                                <input class="form-control" id="ClientAddress" name="ClientAddress" readonly="true" type="text" value="" />
                                                <span class="field-validation-valid text-danger" data-valmsg-for="Line" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label col-md-4" for="">PIC Name</label>
                                            <div class="col-md-8">
                                                <input class="form-control" id="PICName" name="PICName" readonly="true" type="text" value="" />
                                                <span class="field-validation-valid text-danger" data-valmsg-for="PICName" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-4" for="">PIC Phone Number</label>
                                            <div class="col-md-8">
                                                <input class="form-control" id="PICPhoneNumber" name="PICPhoneNumber" readonly="true" type="text" value="" />
                                                <span class="field-validation-valid text-danger" data-valmsg-for="PICPhoneNumber" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>

                                    </div>
                                </div>



                                <div class="form-group">
                                    <label class="control-label col-md-2" for="StartPeriode">StartPeriode</label>
                                    <div class="col-md-10">
                                        <input class="form-control text-box single-line" data-val="true" data-val-date="The field StartPeriode must be a date." id="StartPeriode" name="StartPeriode" required="required" type="datetime" value="" />
                                        <span class="field-validation-valid text-danger" data-valmsg-for="StartPeriode" data-valmsg-replace="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-2" for="EndPeriode">EndPeriode</label>
                                    <div class="col-md-10">
                                        <input class="form-control text-box single-line" data-val="true" data-val-date="The field EndPeriode must be a date." id="EndPeriode" name="EndPeriode" required="required" type="datetime" value="" />
                                        <span class="field-validation-valid text-danger" data-valmsg-for="EndPeriode" data-valmsg-replace="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-2" for="Credit_Line_IDR_">Credit Line(IDR)</label>
                                    <div class="col-md-10">
                                        <input class="form-control text-box single-line" data-val="true" data-val-number="The field Line must be a number." id="Line" name="Line" required="true" type="text" value="0.00" />
                                        <span class="field-validation-valid text-danger" data-valmsg-for="Line" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2" for="DR_Expired_days_">DR Expired(days)</label>
                                    <div class="col-md-10">
                                        <input class="form-control" data-val="true" data-val-number="The field MaxExpiredDR must be a number." id="MaxExpiredDR" name="MaxExpiredDR" required="true" type="text" value="0" />
                                        <span class="field-validation-valid text-danger" data-valmsg-for="MaxExpiredDR" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2" for="Remark">Remark</label>
                                    <div class="col-md-10">
                                        <textarea class="form-control" cols="20" id="Remark" name="Remark" rows="2">
</textarea>
                                        <span class="field-validation-valid text-danger" data-valmsg-for="Remark" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2" for="Site_Name">Site Name</label>
                                    <div class="col-md-10">
                                        <select class="form-control" id="SiteName" name="SiteName" required="true">
                                            <option value="">---</option>
                                            <option value="Kilangan">Kilangan - Kilangan, Jawa Barat</option>
                                        </select>
                                        <span class="field-validation-valid text-danger" data-valmsg-for="SiteName" data-valmsg-replace="true"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-2" for="Quantity_Based_On">Quantity Based On</label>
                                    <div class="col-md-10">
                                        <select class="form-control" id="sliQuantityBasedOn" name="sliQuantityBasedOn" required="true">
                                            <option value="">---</option>
                                            <option value="m3">M3</option>
                                            <option value="ton">Ton</option>
                                        </select>
                                        <span class="field-validation-valid text-danger" data-valmsg-for="SiteName" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2" for="PPn">PPn</label>
                                    <div class="col-md-10">
                                        <select class="form-control" id="sliPpn" name="sliPpn" required="true">
                                            <option value="">---</option>
                                            <option value="Y">Yes</option>
                                            <option value="N">No</option>
                                        </select>
                                        <span class="field-validation-valid text-danger" data-valmsg-for="MaxExpiredDR" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-2" for="IsActive">IsActive</label>
                                    <div class="col-md-10">
                                        <select class="form-control" id="IsActive" name="IsActive" required="true">
                                            <option value="">---</option>
                                            <option value="1">Active</option>
                                            <option value="0">Non-Active</option>
                                        </select>
                                        <span class="field-validation-valid text-danger" data-valmsg-for="IsActive" data-valmsg-replace="true"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-2 control-label">
                                        <input type="button" id="btnDelete" value="Delete" class="btn btn-default" />
                                        <input type="button" id="btnAdd" onclick="btnAddClick()" value="Add" class="btn btn-default" />
                                    </div>
                                    <div class="col-md-5">
                                        <label id="lblTotalProduct" class="h4"></label>
                                        <input id="totalProduct" name="totalProduct" type="hidden" value="" />
                                    </div>
                                    <div class="col-md-5">
                                        <label id="lblTotalValue" class="h4">
                                            <strong id="strongTotalValue">
                                                Total Value :
                                                <span span="spanTotalValue"></span>
                                            </strong>
                                        </label>
                                        <input id="totalValue" name="totalValue" type="hidden" value="" />
                                    </div>
                                </div>
                                <div id="productList">

                                </div>

                                <div class="form-group">
                                    <div class="col-md-offset-2 col-md-10">
                                        <input type="submit" value="Create" class="btn btn-default" />
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="box-footer">
                        <a href="/contract">Back to List</a>
                    </div>
                </div>
                <script type="text/javascript">
                    $(document).ready(function () {

                        //Date picker
                        $('#StartPeriode').datetimepicker({
                            format: 'MM/DD/YYYY'
                        });
                        $('#EndPeriode').datetimepicker({
                            format: 'MM/DD/YYYY'
                        });

                        $("#Line").number(true, 2);
                        $("#MaxExpiredDR").number(true, 0);


                        $("#ClientIdPK").on("change", function () {
                            var selectedClientId = $("#ClientIdPK").val();
                            AjaxCall(function (output) {
                                if (output.data != null) {
                                    if ('company' === output.data[0]["ClientType"]) {
                                        $("#ClientEmail").val(output.data[0]["ClientCompanyLeaderEmailAddress"]);
                                        $("#PICName").val(output.data[0]["ClientCompanyPIC"]);
                                        $("#PICPhoneNumber").val(output.data[0]["ClientCompanyPICPhoneNumber"]);
                                    }
                                    else {
                                        $("#ClientEmail").val(output.data[0]["ClientEmail"]);
                                        $("#PICName").val(output.data[0]["ClientName"]);
                                        $("#PICPhoneNumber").val(output.data[0]["ClientPhoneNumber"]);
                                    }
                                    $("#ClientPhoneNumber").val(output.data[0]["ClientPhoneNumber"]);
                                    $("#ClientAddress").val(output.data[0]["ClientAddress"]);
                                }
                            }, entityApiUrl + '?entitas=CLIENT&filter=Id==' + selectedClientId);
                        });

                    });
                    function btnAddClick() {

                        //$("#btnAdd").on("click", function () {
                        $("#productList").append($("#productList").children().first().clone()).children().last().hide().show('slow', function () {

                        });
                        var totalChild = $("#productList").children().length;
                        $("#productList").children().last().attr("id", "DivContractProduct_" + totalChild);
                        $("#productList").children().last().find("label:first").html("Product  " + totalChild);
                        $("#productList").children().last().find("select:first").attr("name", "ProductId_" + totalChild).attr("id", "ProductId_" + totalChild).val("0");
                        $("#productList").children().last().find("input:first").attr("name", "Amount_" + totalChild).attr("id", "Amount_" + totalChild).val("0").number(true, 2);
                        $("#productList").children().last().find("input").eq(1).attr("name", "Amountm3_" + totalChild).attr("id", "Amountm3_" + totalChild).val("0").number(true, 2);
                        $("#productList").children().last().find("input").eq(2).attr("name", "PricePerTon_" + totalChild).attr("id", "PricePerTon_" + totalChild).val("0").number(true, 2);
                        $("#lblTotalProduct").html('<strong>Total Product : ' + totalChild + '</strong>');
                        $("#totalProduct").val(totalChild);
                        //});
                    }


                    $(document).ready(function () {
                        var selectedClientId = $("#ClientIdPK").val();
                        AjaxCall(function (output) {
                            if (output.data[0] != null) {
                                if ('company' === output.data[0]["ClientType"]) {
                                    $("#ClientEmail").val(output.data[0]["ClientCompanyLeaderEmailAddress"]);
                                } else {
                                    $("#ClientEmail").val(output.data[0]["ClientEmail"]);
                                }
                                $("#ClientPhoneNumber").val(output.data[0]["ClientPhoneNumber"]);
                                $("#ClientAddress").val(output.data[0]["ClientAddress"]);
                            }
                        }, entityApiUrl + '?entitas=CLIENT&filter=Id==' + selectedClientId);


                        //$("#btnAdd").on("click", function () {
                        //    $("#productList").append($("#productList").children().first().clone()).children().last().hide().show('slow', function () {

                        //    });
                        //    var totalChild = $("#productList").children().length;
                        //    $("#productList").children().last().attr("id", "DivContractProduct_" + totalChild);
                        //    $("#productList").children().last().find("label:first").html("Product  " + totalChild);
                        //    $("#productList").children().last().find("select:first").attr("name", "ProductId_" + totalChild).attr("id", "ProductId_" + totalChild).val("0");
                        //    $("#productList").children().last().find("input:first").attr("name", "Amount_" + totalChild).attr("id", "Amount_" + totalChild).val("0").number(true, 2);
                        //    $("#productList").children().last().find("input").eq(1).attr("name", "Amountm3_" + totalChild).attr("id", "Amountm3_" + totalChild).val("0").number(true, 2);
                        //    $("#productList").children().last().find("input").eq(2).attr("name", "PricePerTon_" + totalChild).attr("id", "PricePerTon_" + totalChild).val("0").number(true, 2);
                        //    $("#lblTotalProduct").html('<strong>Total Product : ' + totalChild + '</strong>');
                        //    $("#totalProduct").val(totalChild);
                        //});
                        $("#btnDelete").on("click", function () {
                            var totalChild = $("#productList").children().length;
                            if (totalChild > 1) {
                                $("#productList").children().last().hide('slow', function () {
                                    $(this).remove();

                                    $("#lblTotalProduct").html('<strong>Total Product : ' + $("#productList").children().length + '</strong>');
                                    $("#totalProduct").val($("#productList").children().length);
                                });
                            }

                        });

                        $("#lblTotalProduct").html('<strong>Total Product : ' + $("#productList").children().length + '</strong>');
                        $("#totalProduct").val($("#productList").children().length);


                        // Convertion





                    });
                    function convertRealTime(node) {
                        var tonUnitToM3Unit = 0.66;
                        if (node.className.indexOf('tonunit') != -1) {
                            var idSequence = node.id.substr(node.id.indexOf("_") + 1);
                            $('#Amountm3_' + idSequence).val((parseFloat(node.value) * parseFloat(tonUnitToM3Unit)));
                        }
                        else if (node.className.indexOf('meter3unit') != -1) {
                            var idSequence = node.id.substr(node.id.indexOf("_") + 1);
                            $('#Amount_' + idSequence).val((parseFloat(node.value) / parseFloat(tonUnitToM3Unit)));
                        }

                    }
                </script>



            </section>
            <!-- /.content -->
        </div>

        <!-- /.content-wrapper -->

        <footer class="main-footer">
            <div class="pull-right hidden-xs">
                <b>Version</b> 2.4.0
            </div>
            <strong> <a href="tritsur.com">Tritsur</a>.</strong> All rights
            reserved.

        </footer>
        <div class="control-sidebar-bg"></div>
    </div>
    <!-- ./wrapper -->

    <script type="text/javascript">
        var styleValueActiveColor = "color:#00a65a;";
        $(document).ready(function () {
            var currentController = 'contract';
            var currentAction = 'create';
            var id = currentController + "_" + currentAction;
            if ($("#" + id).length) {
                SetClassParentToMenuOpen(id)
                $("#" + id).attr("class", "active");
                $("#" + id).children("a").children("i").first().attr("style", styleValueActiveColor);
                $("#" + id).children("a").children("span").first().attr("style", styleValueActiveColor);
            } else {
                if ($("#" + currentController + "_index").length) {
                    SetClassParentToMenuOpen(currentController + "_index")
                    $("#" + currentController + "_index").attr("class", "active");
                    $("#" + currentController + "_index").children("a").children("i").first().attr("style", styleValueActiveColor);
                    $("#" + currentController + "_index").children("a").children("span").first().attr("style", styleValueActiveColor);
                }

            }


        });
        function SetClassParentToMenuOpen(id) {
            var parentLi = $("#" + id).parent().parent(".treeview");
            $("#" + id).parent(".treeview-menu").first().attr("style", "display: block;");
            if (parentLi.length == 1) {
                parentLi.addClass("active menu-open");
                parentLi.children("a").children("i").first().attr("style", styleValueActiveColor);
                parentLi.children("a").children("span").first().attr("style", styleValueActiveColor);
                SetClassParentToMenuOpen(parentLi[0]["id"]);
            }

        }
    </script>

    <script type="text/javascript">
        function setModalMaxHeight(element) {
            this.$element = $(element);
            this.$content = this.$element.find('.modal-content');
            var borderWidth = this.$content.outerHeight() - this.$content.innerHeight();
            var dialogMargin = $(window).width() < 768 ? 20 : 60;
            var contentHeight = $(window).height() - (dialogMargin + borderWidth);
            var headerHeight = this.$element.find('.modal-header').outerHeight() || 0;
            var footerHeight = this.$element.find('.modal-footer').outerHeight() || 0;
            var maxHeight = contentHeight - (headerHeight + footerHeight);

            this.$content.css({
                'overflow': 'hidden'
            });

            this.$element
                .find('.modal-body').css({
                    'max-height': maxHeight,
                    'overflow-y': 'auto'
                });
        }
        $(document).ready(function () {
            $('.modal').on('show.bs.modal', function () {
                $(this).show();
                setModalMaxHeight(this);
            });
        });


        $(window).resize(function () {
            if ($('.modal.in').length != 0) {
                setModalMaxHeight($('.modal.in'));
            }
        });
    </script>
</body>


</html>
